<script>$("#navbar-index").addClass("active");var page_offset = 0;var limit = 20;var refresh_lock = false;$( function(){	$("#news-feed-container").hide();    showNewsFeed();	$("#news-feed-container").fadeIn('slow');});$(window).scroll(function() {	var top = document.documentElement.scrollTop + document.body.scrollTop;	var bodyheight = $(document).height();	if (bodyheight - top - $(window).height() <= 100) {		showNewsFeed();	}});function showNewsFeed() {	if (!refresh_lock) {		refresh_lock = true;		$.getJSON("{'index/ajaxGetAllNewsFeed'|site_url}", {			"page_offset": page_offset,			"limit": limit		}, function(data) {			for(i in data) {				$("#news-feed-container").append( wrapNewsFeed( i+1, data[i]) );			}			page_offset += limit;			refresh_lock = false;		});	}}function wrapNewsFeed( id, news ) {	var a = '<div class="news-feed-item"><hr>'+			'<img class="avatar-medium" src="'+news.image+'">'+			news.msg+"~"+			'<span class="timestamp">'+news.created_time+'</span></div>';	return a;}</script>